(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index"],{"0264":function(t){t.exports=JSON.parse('[{"position":"28.180316,112.933421","styleId":"蔡锷墓","properties":{},"icon":2},{"position":"28.078503,112.901239","styleId":"曾国藩墓","properties":{},"icon":2},{"position":"28.195444,112.978726","styleId":"中苏友好馆","properties":{},"icon":1},{"position":"28.202427,112.973700","styleId":"潮宗街","properties":{},"icon":1},{"position":"28.504336,112.734877","styleId":"刘宜民故居","properties":{},"icon":1},{"position":"28.224383,112.978319","styleId":"开福寺","properties":{},"icon":1}]')},"0c7e":function(t,e,i){t.exports=i.p+"static/img/map_0_syh.77c3c00a.png"},"0f47":function(t,e,i){t.exports=i.p+"static/img/map_0_xhgy.e405d743.png"},1923:function(t,e,i){t.exports=i.p+"static/img/map_0_mxh.85930bb0.png"},"1ab2":function(t,e,i){"use strict";var a=i("6c5c"),o=i.n(a);o.a},"1f7c":function(t,e,i){"use strict";i("7a82");var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("d81d"),i("99af"),i("d3b7"),i("159b"),i("14d9"),i("e9c4"),i("acd8"),i("a4d3"),i("e01a");var o=a(i("c7eb")),n=a(i("5530")),r=a(i("2909")),s=a(i("1da1")),p=a(i("0264")),f=a(i("1887")),d=a(i("55f9")),c=a(i("c496")),l=a(i("9e91")),u=a(i("0367")),h=a(i("f51d")),m=(a(i("89d3")),a(i("b02b"))),g=a(i("b0f8")),y=a(i("c782")),x=a(i("fbba")),v=a(i("0c7e")),b=a(i("a395")),w=a(i("7025")),_=a(i("940e")),k=a(i("d02e")),M=a(i("1923")),z=a(i("0f47")),T={data:function(){return{infotitle:"",infoaddr:"",infocontent:"",info:!1,hover:"全部",spotRes:[],mapkay:[],marker:null,menuList:[{title:"全部"},{title:"历史文化名城"},{title:"历史文化风貌区"},{title:"文物保护"},{title:"历史建筑"},{title:"风貌名胜"},{title:"非物质文化遗产"}],type:{"历史文化名城":"whmcMarker","历史文化风貌区":"fmmsMarker","文物保护":"wwbhMarker","历史建筑":"jzMarker","风貌名胜":"fmmsMarker","非物质文化遗产":"whycMarker"}}},onReady:function(){var t=this;return(0,s.default)((0,o.default)().mark((function e(){var i,a,s,T,S,I,L;return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=new TMap.LatLng(28.195506,112.962542),t.map=new TMap.Map(document.getElementById("container"),{center:i,zoom:10,minZoom:10,maxZoom:16,showControl:!1,mapStyleId:"style1",boundary:new TMap.LatLngBounds(new TMap.LatLng(27.926474,112.552185),new TMap.LatLng(28.405897,113.35968))}),a=[],"z0",s=[],T=[].concat((0,r.default)(p.default),[{position:"28.179165,112.948594",styleId:"map_0_dxc"},{position:"28.209424,113.000221",styleId:"map_0_lsgy"},{position:"28.266590,113.100815",styleId:"map_0_syh"},{position:"28.167665,112.960310",styleId:"map_0_jzz"},{position:"28.124981,112.927094",styleId:"map_0_yhsd"},{position:"28.045622,112.882462",styleId:"map_0_dws"},{position:"28.103178,113.032150",styleId:"map_0_zwy"},{position:"28.188395,112.899456",styleId:"map_0_mxh"},{position:"28.207760,112.941685",styleId:"map_0_xhgy"}]),T.forEach((function(t,e){s.push({id:1e4+e,styleId:t.styleId,position:new TMap.LatLng(t.position.split(",")[0],t.position.split(",")[1]),content:t.name,properties:(0,n.default)((0,n.default)({},t.properties),{},{id:1e4+e,zType:"z0",position:t.position})})})),S=[],a=s,I={map_0_czj:new TMap.MarkerStyle({width:75,height:125,src:m.default,size:14,strokeWidth:1,color:"#fff",anchor:{x:37,y:95}}),map_0_yls:new TMap.MarkerStyle({width:75,height:125,src:g.default,size:14,strokeWidth:1,color:"#fff",anchor:{x:37,y:95}}),map_0_dxc:new TMap.MarkerStyle({width:75,height:125,src:y.default,size:14,strokeWidth:1,color:"#fff",anchor:{x:37,y:95}}),map_0_lsgy:new TMap.MarkerStyle({width:75,height:125,src:x.default,size:14,strokeWidth:1,color:"#fff",anchor:{x:37,y:95}}),map_0_syh:new TMap.MarkerStyle({width:75,height:125,src:v.default,size:14,strokeWidth:1,color:"#fff",anchor:{x:37,y:95}}),map_0_jzz:new TMap.MarkerStyle({width:75,height:125,src:b.default,size:14,strokeWidth:1,color:"#fff",anchor:{x:37,y:95}}),map_0_yhsd:new TMap.MarkerStyle({width:75,height:125,src:w.default,size:14,strokeWidth:1,color:"#fff",anchor:{x:37,y:95}}),map_0_dws:new TMap.MarkerStyle({width:75,height:125,src:_.default,size:14,strokeWidth:1,color:"#fff",anchor:{x:37,y:95}}),map_0_zwy:new TMap.MarkerStyle({width:75,height:125,src:k.default,size:14,strokeWidth:1,color:"#fff",anchor:{x:37,y:95}}),map_0_mxh:new TMap.MarkerStyle({width:75,height:125,src:M.default,size:14,strokeWidth:1,color:"#fff",anchor:{x:37,y:95}}),map_0_xhgy:new TMap.MarkerStyle({width:75,height:125,src:z.default,size:14,strokeWidth:1,color:"#fff",anchor:{x:37,y:95}}),whmcMarker:new TMap.MarkerStyle({width:40,height:40,src:f.default,size:14,strokeWidth:1,color:"#fff",offset:{x:0,y:28}}),fmmsMarker:new TMap.MarkerStyle({width:40,height:40,src:d.default,size:14,strokeWidth:1,color:"#fff",offset:{x:0,y:28}}),jzMarker:new TMap.MarkerStyle({width:40,height:40,src:c.default,size:14,strokeWidth:1,color:"#fff",offset:{x:0,y:28}}),whfmMarker:new TMap.MarkerStyle({width:40,height:40,src:l.default,size:14,strokeWidth:1,color:"#fff",offset:{x:0,y:28}}),whycMarker:new TMap.MarkerStyle({width:40,height:40,src:u.default,size:14,strokeWidth:1,color:"#fff",offset:{x:0,y:28}}),wwbhMarker:new TMap.MarkerStyle({width:40,height:40,src:h.default,size:14,strokeWidth:1,color:"#fff",offset:{x:0,y:28}})},p.default.forEach((function(t){I[t.styleId]=new TMap.MarkerStyle({width:30,height:120,size:50,src:"../static/".concat(t.styleId,".png"),offset:{x:15,y:120}})})),t.marker=new TMap.MultiMarker({id:"marker-layer",map:t.map,styles:I,geometries:a}),t.marker.on("click",t.markertap),t.map.on("dragstart",(function(e){t.info=!1})),t.map.on("idle",(function(e){var i=t.map.getZoom();i<=15&&a!=s?(t.marker.remove(a.map((function(t){return t.id}))),s.forEach((function(e){return t.marker.add(e)})),a=s):i>15&&a!=S&&(t.marker.remove(a.map((function(t){return t.id}))),S.forEach((function(e){return t.marker.add(e)})),a=S)})),e.next=16,uni.getLocation({type:"gcj02",isHighAccuracy:!0});case 16:L=e.sent,alert(JSON.stringify(L)),t.marker.add({id:7777,position:new TMap.LatLng(L.latitude,L.longitude)});case 19:case"end":return e.stop()}}),e)})))()},methods:{bMapToQQMap:function(t,e){if(null==t||""==t||null==e||""==e)return[t,e];var i=3.141592653589793,a=parseFloat(t)-.0065,o=parseFloat(e)-.006,n=Math.sqrt(a*a+o*o)-2e-5*Math.sin(o*i),r=Math.atan2(o,a)-3e-6*Math.cos(a*i);t=(n*Math.cos(r)).toFixed(7),e=(n*Math.sin(r)).toFixed(7);return[t,e]},itemclick:function(t){console.log(t)},menuLab:function(t){var e=this;this.hover=t,this.marker.remove(this.mapkay);var i=[];this.spotRes.data.data.content.forEach((function(a,o){if(a.xy.split(",")[1]&&(console.log(a.type.split(",")[0],t),"全部"==t||a.type.split(",")[0]==t)){e.mapkay.push(o);var n=e.bMapToQQMap(a.xy.split(",")[0],a.xy.split(",")[1]);i.push({id:o,styleId:e.type[a.type.split(",")[0]],position:new TMap.LatLng(n[1],n[0]),content:a.name,properties:a})}})),this.marker.add(i)},markertap:function(t){console.log(t.geometry.properties),"z0"==t.geometry.properties.zType&&this.map.easeTo({zoom:15.5,center:t.geometry.properties.position}),"z1"==t.geometry.properties.zType&&(this.infotitle=t.geometry.properties.name,this.infoaddr=t.geometry.properties.addr,this.infocontent=t.geometry.properties.description,this.infodata=t.geometry.properties,this.info=!0)},infoPage:function(){uni.navigateTo({url:"/pages/info?infodata="+JSON.stringify(this.infodata)})},link:function(t){uni.navigateTo({url:t})}}};e.default=T},2909:function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,a.default)(t)||(0,o.default)(t)||(0,n.default)(t)||(0,r.default)()};var a=s(i("6005")),o=s(i("db90")),n=s(i("06c5")),r=s(i("3427"));function s(t){return t&&t.__esModule?t:{default:t}}},3427:function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},i("d9e2"),i("d401")},"455b":function(t,e,i){t.exports=i.p+"static/img/定位.75505696.svg"},6005:function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(Array.isArray(t))return(0,a.default)(t)};var a=function(t){return t&&t.__esModule?t:{default:t}}(i("6b75"))},"6c5c":function(t,e,i){var a=i("b61b");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("8befe7e4",a,!0,{sourceMap:!1,shadowMode:!1})},7025:function(t,e,i){t.exports=i.p+"static/img/map_0_yhsd.07eb5006.png"},"7b86":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"content"},[a("v-uni-view",{staticClass:"map",attrs:{id:"container"}}),a("v-uni-view",{staticClass:"head"},t._l(t.menuList,(function(e,i){return a("v-uni-view",{key:i,staticClass:"item",class:t.hover==e.title&&"hover",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.menuLab(e.title)}}},[t._v(t._s(e.title))])})),1),a("v-uni-view",{staticClass:"btn"},[a("v-uni-view",{staticClass:"item"},[a("span",[t._v("路线")]),a("v-uni-image",{staticClass:"bg",attrs:{src:i("71d8")}})],1),a("v-uni-view",{staticClass:"item"},[a("span",[t._v("视频")]),a("v-uni-image",{staticClass:"bg",attrs:{src:i("f626")}})],1),a("v-uni-view",{staticClass:"item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.link("/pages/user")}}},[a("span",[t._v("个人")]),a("v-uni-image",{staticClass:"bg",attrs:{src:i("d34b")}})],1)],1),a("v-uni-view",{staticClass:"btn btn2"},[a("v-uni-view",{staticClass:"item",staticStyle:{"margin-top":"100px"}},[a("v-uni-image",{staticStyle:{width:"30px",height:"30px",position:"absolute","z-index":"1",left:"0",right:"0",top:"0",bottom:"0",margin:"auto"},attrs:{src:i("455b")}}),a("v-uni-image",{staticClass:"bg",attrs:{src:i("da4e")}})],1)],1),a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.info,expression:"info"}],staticClass:"info"},[a("v-uni-view",{staticStyle:{position:"absolute",top:"10px",right:"10px","font-size":"16px",color:"#2196F3"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.infoPage.apply(void 0,arguments)}}},[t._v("详细信息")]),a("v-uni-view",{staticStyle:{"font-size":"18px"}},[t._v(t._s(t.infotitle))]),a("v-uni-view",{staticStyle:{"font-size":"14px",color:"#9E9E9E","margin-bottom":"8px"}},[t._v(t._s(t.infoaddr))]),a("v-uni-view",{staticStyle:{"font-size":"14px","max-height":"200px",overflow:"auto"}},[t._v(t._s(t.infocontent))])],1)],1)},o=[]},"89d3":function(t,e,i){t.exports=i.p+"static/img/map_0_fmq.e61d69d9.png"},"940e":function(t,e,i){t.exports=i.p+"static/img/map_0_dws.7806d38a.png"},a395:function(t,e,i){t.exports=i.p+"static/img/map_0_jzz.f302e5f6.png"},b02b:function(t,e,i){t.exports=i.p+"static/img/map_0_czj.a3df4050.png"},b0f8:function(t,e,i){t.exports=i.p+"static/img/map_0_yls.a665a4e1.png"},b1c9:function(t,e,i){"use strict";i.r(e);var a=i("7b86"),o=i("b616");for(var n in o)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(n);i("1ab2");var r=i("f0c5"),s=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"0d48a8e2",null,!1,a["a"],void 0);e["default"]=s.exports},b616:function(t,e,i){"use strict";i.r(e);var a=i("1f7c"),o=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=o.a},b61b:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".map[data-v-0d48a8e2]{position:absolute;top:39px;left:0;bottom:0;right:0;margin:auto;width:100%}.head[data-v-0d48a8e2]{position:absolute;top:0;height:35px;left:0;line-height:35px;right:0;background:#f8f8f8;padding:0 10px 4px;overflow:auto;font-size:14px;display:flex}.head .item[data-v-0d48a8e2]{flex:0 0 auto;text-align:center;margin:0 5px;padding:0 10px;height:26px;line-height:26px;position:relative;top:4px;border-radius:25px}.head .item.hover[data-v-0d48a8e2]{color:#fff;background-color:#b39b5f}.info[data-v-0d48a8e2]{position:absolute;left:20px;bottom:20px;right:20px;margin:auto;background-color:#fff;border-radius:6px;overflow:hidden;padding:15px;transition:all .8s;z-index:2000\n  /* border: 1px solid #00a9ff40; */}.btn[data-v-0d48a8e2]{position:absolute;right:20px;top:70px;z-index:1001}.btn2[data-v-0d48a8e2]{top:auto;bottom:200px}.btn .item[data-v-0d48a8e2]{height:50px;width:50px;margin-bottom:15px;border-radius:50px;border:2px solid #fff;\n  /*    background-image: url(@/static/btn-bg.jpeg);\n  background-size: 70px;\n  background-position: 30% center; */font-family:阿里妈妈刀隶体 Regular;position:relative;overflow:hidden}.btn .item .bg[data-v-0d48a8e2]{position:absolute;width:80px;height:80px;left:-12px;top:-10px}.btn .item span[data-v-0d48a8e2]{color:#795548;text-shadow:#fff 1px 0 0,#fff 0 1px 0,#fff -1px 0 0,#fff 0 -1px 0;font-size:20px;position:relative;left:5px;top:17px;z-index:1}.callout-item[data-v-0d48a8e2]{pointer-events:none;position:absolute;top:-10px;left:-13px;background-image:url(/static/建筑.png);width:30px;height:100px;background-size:100% 100%;white-space:break-spaces}.callout-item uni-view[data-v-0d48a8e2]{left:7px;top:26px;display:block;position:absolute;width:1px;height:100px;line-height:16px;font-size:15px;font-weight:700;color:#fff;white-space:break-spaces}",""]),t.exports=e},c782:function(t,e,i){t.exports=i.p+"static/img/map_0_dxc.17492f4a.png"},d02e:function(t,e,i){t.exports=i.p+"static/img/map_0_zwy.497dccdf.png"},db90:function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0"),i("a630")},fbba:function(t,e,i){t.exports=i.p+"static/img/map_0_lsgy.a994bd62.png"}}]);