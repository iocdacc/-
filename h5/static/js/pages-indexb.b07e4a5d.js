(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-indexb"],{"0dde":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".map[data-v-59a51cf0]{position:absolute;top:39px;left:0;bottom:5px;right:0;margin:auto;width:100%}.head[data-v-59a51cf0]{position:absolute;top:0;height:35px;left:0;line-height:35px;right:0;background:#f8f8f8;padding:0 10px 4px;overflow:auto;font-size:14px;display:flex}.head .item[data-v-59a51cf0]{flex:0 0 auto;text-align:center;margin:0 5px;padding:0 10px;height:26px;line-height:26px;position:relative;top:4px;border-radius:25px}.head .item.hover[data-v-59a51cf0]{color:#fff;background-color:#b39b5f}.info[data-v-59a51cf0]{position:absolute;left:10px;bottom:10px;right:10px;margin:auto;background-color:#fff;border-radius:6px;overflow:hidden;padding:15px;transition:all .8s;z-index:2000\n  /* border: 1px solid #00a9ff40; */}.btn[data-v-59a51cf0]{position:absolute;right:20px;top:70px}.btn2[data-v-59a51cf0]{top:auto;bottom:200px}.btn .item[data-v-59a51cf0]{height:50px;width:50px;margin-bottom:15px;border-radius:50px;border:2px solid #fff;\n  /*    background-image: url(@/static/btn-bg.jpeg);\n  background-size: 70px;\n  background-position: 30% center; */font-family:阿里妈妈刀隶体 Regular;position:relative;overflow:hidden}.btn .item .bg[data-v-59a51cf0]{position:absolute;width:80px;height:80px;left:-12px;top:-10px}.btn .item span[data-v-59a51cf0]{color:#795548;text-shadow:#fff 1px 0 0,#fff 0 1px 0,#fff -1px 0 0,#fff 0 -1px 0;font-size:20px;position:relative;left:5px;top:17px;z-index:1}.callout-item[data-v-59a51cf0]{pointer-events:none;position:absolute;top:-10px;left:-13px;background-image:url(/static/建筑.png);width:30px;height:100px;background-size:100% 100%;white-space:break-spaces}.callout-item uni-view[data-v-59a51cf0]{left:7px;top:26px;display:block;position:absolute;width:1px;height:100px;line-height:16px;font-size:15px;font-weight:700;color:#fff;white-space:break-spaces}",""]),t.exports=e},"4c91":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"content"},[i("div",{staticClass:"map",attrs:{id:"container"}}),i("v-uni-view",{staticClass:"head"},t._l(t.menuList,(function(e,a){return i("v-uni-view",{key:a,staticClass:"item",class:t.hover==e.title&&"hover",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.menuLab(e.title)}}},[t._v(t._s(e.title))])})),1),i("v-uni-view",{staticClass:"btn"},[i("v-uni-view",{staticClass:"item"},[i("span",[t._v("路线")]),i("v-uni-image",{staticClass:"bg",attrs:{src:a("71d8")}})],1),i("v-uni-view",{staticClass:"item"},[i("span",[t._v("视频")]),i("v-uni-image",{staticClass:"bg",attrs:{src:a("f626")}})],1),i("v-uni-view",{staticClass:"item"},[i("span",[t._v("个人")]),i("v-uni-image",{staticClass:"bg",attrs:{src:a("d34b")}})],1)],1),i("v-uni-view",{staticClass:"btn btn2"},[i("v-uni-view",{staticClass:"item",staticStyle:{"margin-top":"100px"}},[i("span",[t._v("定位")]),i("v-uni-image",{staticClass:"bg",attrs:{src:a("da4e")}})],1)],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.info,expression:"info"}],staticClass:"info"},[i("v-uni-view",{staticStyle:{position:"absolute",top:"10px",right:"10px","font-size":"16px",color:"#2196F3"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.infoPage.apply(void 0,arguments)}}},[t._v("详细信息")]),i("v-uni-view",{staticStyle:{"font-size":"18px"}},[t._v(t._s(t.infotitle))]),i("v-uni-view",{staticStyle:{"font-size":"14px",color:"#9E9E9E","margin-bottom":"8px"}},[t._v(t._s(t.infoaddr))]),i("v-uni-view",{staticStyle:{"font-size":"14px","max-height":"200px",overflow:"auto"}},[t._v(t._s(t.infocontent))])],1)],1)},o=[]},a84f:function(t,e,a){"use strict";a.r(e);var i=a("fd47"),o=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=o.a},b8a9:function(t,e,a){var i=a("0dde");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("4f06").default;o("d48a1bc4",i,!0,{sourceMap:!1,shadowMode:!1})},dfd9:function(t,e,a){"use strict";var i=a("b8a9"),o=a.n(i);o.a},e4eb:function(t,e,a){"use strict";a.r(e);var i=a("4c91"),o=a("a84f");for(var n in o)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return o[t]}))}(n);a("dfd9");var s=a("f0c5"),r=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"59a51cf0",null,!1,i["a"],void 0);e["default"]=r.exports},fd47:function(t,e,a){"use strict";a("7a82");var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("d3b7"),a("159b"),a("14d9"),a("acd8"),a("a4d3"),a("e01a"),a("e9c4");var o=i(a("c7eb")),n=i(a("1da1")),s=i(a("1887")),r=i(a("55f9")),f=i(a("c496")),p=i(a("9e91")),l=i(a("0367")),c=i(a("f51d")),d={data:function(){return{infotitle:"",infoaddr:"",infocontent:"",info:!1,hover:"全部",spotRes:[],mapkay:[],marker:null,menuList:[{title:"全部"},{title:"历史文化名城"},{title:"历史文化风貌区"},{title:"文物保护"},{title:"历史建筑"},{title:"风貌名胜"},{title:"非物质文化遗产"}],type:{"历史文化名城":"whmcMarker","历史文化风貌区":"fmmsMarker","文物保护":"wwbhMarker","历史建筑":"jzMarker","风貌名胜":"fmmsMarker","非物质文化遗产":"whycMarker"}}},onReady:function(){var t=this;return(0,n.default)((0,o.default)().mark((function e(){var a,i,n;return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,uni.request({url:"http://175.6.136.216:8087/historic/spot/list",method:"POST",data:{page:1,size:500,sort:{desc:"createTime"}}});case 2:t.spotRes=e.sent,a=new TMap.LatLng(28.195506,112.962542),i=new TMap.Map(document.getElementById("container"),{center:a,zoom:12.5,minScale:12,maxScale:13.5,showControl:!1,mapStyleId:"style1"}),n=[],t.spotRes.data.data.content.forEach((function(e,a){if(e.xy.split(",")[1]){t.mapkay.push(a);var i=t.bMapToQQMap(e.xy.split(",")[0],e.xy.split(",")[1]);n.push({id:a,styleId:t.type[e.type.split(",")[0]],position:new TMap.LatLng(i[1],i[0]),content:e.name,properties:e})}})),t.marker=new TMap.MultiMarker({id:"marker-layer",map:i,styles:{whmcMarker:new TMap.MarkerStyle({width:40,height:40,src:s.default,size:14,strokeWidth:1,color:"#fff",offset:{x:0,y:28}}),fmmsMarker:new TMap.MarkerStyle({width:40,height:40,src:r.default,size:14,strokeWidth:1,color:"#fff",offset:{x:0,y:28}}),jzMarker:new TMap.MarkerStyle({width:40,height:40,src:f.default,size:14,strokeWidth:1,color:"#fff",offset:{x:0,y:28}}),whfmMarker:new TMap.MarkerStyle({width:40,height:40,src:p.default,size:14,strokeWidth:1,color:"#fff",offset:{x:0,y:28}}),whycMarker:new TMap.MarkerStyle({width:40,height:40,src:l.default,size:14,strokeWidth:1,color:"#fff",offset:{x:0,y:28}}),wwbhMarker:new TMap.MarkerStyle({width:40,height:40,src:c.default,size:14,strokeWidth:1,color:"#fff",offset:{x:0,y:28}})},geometries:n}),t.marker.on("click",t.markertap),i.on("dragstart",(function(e){t.info=!1}));case 10:case"end":return e.stop()}}),e)})))()},methods:{bMapToQQMap:function(t,e){if(null==t||""==t||null==e||""==e)return[t,e];var a=3.141592653589793,i=parseFloat(t)-.0065,o=parseFloat(e)-.006,n=Math.sqrt(i*i+o*o)-2e-5*Math.sin(o*a),s=Math.atan2(o,i)-3e-6*Math.cos(i*a);t=(n*Math.cos(s)).toFixed(7),e=(n*Math.sin(s)).toFixed(7);return[t,e]},itemclick:function(t){console.log(t)},menuLab:function(t){var e=this;this.hover=t,this.marker.remove(this.mapkay);var a=[];this.spotRes.data.data.content.forEach((function(i,o){if(i.xy.split(",")[1]&&(console.log(i.type.split(",")[0],t),"全部"==t||i.type.split(",")[0]==t)){e.mapkay.push(o);var n=e.bMapToQQMap(i.xy.split(",")[0],i.xy.split(",")[1]);a.push({id:o,styleId:e.type[i.type.split(",")[0]],position:new TMap.LatLng(n[1],n[0]),content:i.name,properties:i})}})),this.marker.add(a)},markertap:function(t){console.log(t.geometry),this.infotitle=t.geometry.properties.name,this.infoaddr=t.geometry.properties.addr,this.infocontent=t.geometry.properties.description,this.infodata=t.geometry.properties,this.info=!0},infoPage:function(){uni.navigateTo({url:"/pages/info?infodata="+JSON.stringify(this.infodata)})}}};e.default=d}}]);